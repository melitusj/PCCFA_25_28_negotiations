---
title: "PCC Budget History Analysis"
author: "Melissa Anderson"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(janitor)
library(here)
library(readxl)
library(kableExtra)
library(ggplot2)
library(scales)

budget_data <- read_excel(here("data", "Budget Data.xlsx"))

budget_differential <- budget_data %>%
  mutate(Actual_Cost_minus_expenses = `Actual Total Income`- `Actual Total Expenses`,
         Budget_Cost_minus_expenses = `Budget Total Income`- `Budget Total Expenses`)

budget_clean <- pivot_longer(data = budget_differential, 
                                    cols = 'Actual Total Income':'Budget_Cost_minus_expenses',
                                    names_to = "Category",
                                    values_to = "Amount")

actual_differential <- budget_clean %>% 
  filter(Category %in% c("Actual_Cost_minus_expenses"))


actual_differential <- actual_differential%>% filter(!is.na(Amount))
```
## The District's Income Has Significantly Exceeded Its Expenses Since 2015

```{r echo=FALSE}
ggplot(data = actual_differential, aes(x = Year, y = Amount)) +
  geom_line(color = "red") +
    scale_y_continuous("Actual Income - Actual Expenses",
    labels = scales::label_dollar()
    ) +
  theme_minimal() + 
  #geom_hline(yintercept = 11000000, col = "blue",linewidth = 1,linetype = "dashed") + 
  geom_hline(yintercept = 0, col = "black") 

  


```

**Figure 1:** Difference between the Total Actual Income and the Total Actual Expenses from 2007 to 2024. *Source: https://pasadena.edu/business-administrative-services/fiscal-services/budget-forecast-analysis.php*
```{r eval=FALSE, include=FALSE}
#The dashed like ($11M) represents the amount needed by the district to fund a %5 raise for full-time faculty and 15% raise for part-time faculty. This estimate assumes a "Me Too" cost of 5% for other barganing units.
```

